<? const FilteringCSS = "client/pages/HumanManager/Filtering/filtering-css"?>
<? const Collapsible = "client/components/Collapsible/Collapsible"?>
<? const Filters = "client/components/Filters/Filters"?>
<? const Tabs = "client/components/Tabs/Tabs"?>
<? const FilteringJS = "client/pages/HumanManager/Filtering/filtering-js"?>

<?!= _I(FilteringCSS) ?>

<div class="stages">
    <?!= _I(Tabs,{stages}) ?>
</div>
<? stages.forEach((stage,i)=>{?>
<? const entriesArray = dataByStage[stage] ?>
<div class="per-stage-container <?= i==0&&'active' ?>" id="<?= stage ?>-container">
    <? if(entriesArray){ ?>
    <div class="filters">
        <?!= _I(Filters, {filters}) ?>
    </div>
    <div class="page-per-stage">
        <!-- Loop over stages -->
        <div class="collapsibles">
            <? entriesArray.forEach(function(entry){?>
            <?!= _I(Collapsible, entry) ?>
            <? }) ?>
        </div>
    </div>
    <? }else{ ?>
    <div class="no-one-in-stage">
        No one reached this stage yet.
    </div>
    <? } ?>
</div>
<? }) ?>

<?!= _I(FilteringJS) ?>